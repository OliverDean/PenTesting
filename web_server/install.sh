#!/bin/bash
# Exit immediately if a command exits with a non-zero status
set -e

# Ensure the script is run as root
if [[ "$EUID" -ne 0 ]]; then
    echo "Please run this script as root or using sudo."
    exit 1
fi

# Function to print messages
function print_msg() {
    echo -e "\n==== $1 ====\n"
}

# Update package lists and upgrade existing packages
print_msg "Updating and upgrading the system..."
apt-get update && apt-get -y upgrade

# Install Hashcat (password recovery tool)
echo "Installing Hashcat..."
apt-get install -y hashcat

# Install John the Ripper (password cracker)
echo "Installing John the Ripper..."
apt-get install -y john

# Install Nmap (network scanner)
echo "Installing Nmap..."
apt-get install -y nmap

echo "Installing dos2unix..."
apt-get install dos2unix

# Install Wireshark (network protocol analyzer)
echo "Installing Wireshark..."
DEBIAN_FRONTEND=noninteractive apt-get install -y wireshark

# Install necessary packages
print_msg "Installing necessary packages..."
apt-get install -y --no-install-recommends \
    sudo \
    openssl \
    python3 \
    python3-pip \
    python3-venv \
    clamav \
    wget \
    tar \
    bash \
    xinit \
    x11-xserver-utils \
    firefox \
    xdotool \
    unclutter \
    nano \
    gnupg \
    zip \
    unzip \
    ufw \
    nginx \
    apparmor \
    apparmor-utils \
    unattended-upgrades \
    apt-listchanges \
    logwatch \
    vim \
    zenity \
    gcc \
    cron \
    dconf-cli \
    dbus-x11 \
    nfs-kernel-server \
    xbindkeys \
    samba \
    knockd \
    redis-server \
    net-tools \
    lighdm \

print_msg "All packages have been installed successfully."
