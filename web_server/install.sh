#!/bin/bash
# Exit immediately if a command exits with a non-zero status
set -e

# Ensure the script is run as root
if [[ "$EUID" -ne 0 ]]; then
    echo "Please run this script as root or using sudo."
    exit 1
fi

# Function to print messages
function print_msg() {
    echo -e "\n==== $1 ====\n"
}

# Update package lists and upgrade existing packages
print_msg "Updating and upgrading the system..."
apt-get update && apt-get -y upgrade

# Install necessary packages
print_msg "Installing required packages and dependencies..."
apt-get install -y --no-install-recommends \
    sudo \
    openssl \
    python3 \
    python3-pip \
    python3-venv \
    clamav \
    fail2ban \
    wget \
    tar \
    bash \
    xinit \
    x11-xserver-utils \
    firefox \
    lightdm \
    xdotool \
    unclutter \
    nano \
    gnupg \
    zip \
    unzip \
    ufw \
    nginx \
    apparmor \
    apparmor-utils \
    unattended-upgrades \
    apt-listchanges \
    logwatch \
    vim \
    zenity \
    gcc \
    cron \
    dconf-cli \
    dbus-x11 \
    nfs-kernel-server \
    xbindkeys

print_msg "All packages have been installed successfully."
